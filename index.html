
<!DOCTYPE html>
<html lang="lv">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Klīnika TV</title>
  <style>
    :root{--bar:86px;--fg:#fff;--bg:#0b1220;--muted:#a9b3c7;--acc:#28a6ff;--speed:35s}

    /* Dinamiskais viewport augstums – drošāks uz mobilajiem */
    html, body{
      height: 100svh; /* moderns variants */
      height: 100dvh; /* jaunākais variants */
      margin:0; background:#000; color:var(--fg);
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,"Noto Sans",sans-serif;
      box-sizing:border-box; overflow:hidden;
    }
    *,*::before,*::after{ box-sizing:inherit; }

    /* Izkārtojums: 2 rindas – video (1fr) + josla (auto) */
    body{
      display:grid;
      grid-template-rows:minmax(0,1fr) auto; /* novērš overflow push */
      grid-template-columns:100%;
      min-height:100svh;
      min-height:100dvh;
    }

    .stage{
      min-height:0; position:relative; background:#000; contain:content; cursor:none; touch-action:none;
      /* Video zona beidzas pie joslas */
      height: calc(100dvh - var(--bar));
      height: calc(100svh - var(--bar)); /* fallback */
    }
    video{ width:100%; height:100%; object-fit:cover; display:block; background:#000; }

    /* Apakšējā josla PLŪSMĀ (NE fixed) */
    .bar{
      position:static; z-index:auto;
      height:var(--bar); padding:10px 16px; background:#0b1220;
      border-top:1px solid rgba(255,255,255,.08);
      display:grid; grid-template-columns:300px 1fr 320px; gap:16px; align-items:center;
    }

    .time{font-weight:700;font-size:28px;line-height:1}
    .date{font-size:14px;color:var(--muted)}
    .ticker{position:relative;overflow:hidden;white-space:nowrap;height:100%}
    .track{position:absolute;display:inline-block;white-space:nowrap;animation:scroll var(--speed) linear infinite;font-size:20px}
    @keyframes scroll{from{transform:translateX(100%)}to{transform:translateX(-100%)}}
    .ticker strong{color:var(--acc)}
    .weather{display:grid;grid-template-columns:56px 1fr;align-items:center;gap:12px;justify-self:end}
    .temp{font-size:26px;font-weight:700}
    .desc{font-size:14px;color:var(--muted);text-transform:capitalize}
    .pill{display:inline-block;padding:2px 8px;border-radius:999px;background:rgba(255,255,255,.08);font-size:12px;margin-left:8px;color:var(--muted)}

    @media (prefers-reduced-motion: reduce){ .track{ animation:none; transform:none; position:static; } .ticker{ overflow:visible; } }

    /* Uz šauriem ekrāniem josla var būt auto – JS nomēra un pielāgo --bar */
    @media (max-width:900px){
      .bar{grid-template-columns:1fr; height:auto}
      .weather{justify-self:start; margin-top:8px}
      .track{font-size:18px}
    }
  </style>
</head>
<body>
  <!-- Rinda #1: video -->
  <div class="stage">
    <video id="player" autoplay muted playsinline></video>
  </div>

  <!-- Rinda #2: apakšējā josla -->
  <div class="bar">
    <div>
      <div class="time" id="t">--:--</div>
      <div class="date" id="d">—</div>
    </div>

    <div class="ticker"><div class="track" id="tk">Ielādējas…</div></div>

    <div class="weather">
      <img id="wxI" width="56" height="56" alt=""/>
      <div>
        <div class="temp"><span id="wxT">--</span>°C <span class="pill" id="wxC">Rīga</span></div>
        <div class="desc" id="wxD">—</div>
      </div>
    </div>
  </div>

<script>
/* ===== IESTATĪJUMI ===== */
const PLAYLIST = ["video2.mp4","DermatoloÄ£ija.mp4","Videoadm123.mp4","Bariatriskaendoskopija.mp4"];
const OPENWEATHER_API_KEY = "8c38215495b18f116d137cee7fb9d6f1";
const LOCATION = { city:"Rīga", lat:56.9496, lon:24.1052 };
const WX_MS = 10*60*1000; const ND_MS = 12*60*60*1000;

/* ===== Sinhronizē joslas augstumu (--bar) ar reālo izmēru ===== */
function syncBarHeightVar(){
  const bar = document.querySelector('.bar');
  if(!bar) return;
  const h = Math.round(bar.getBoundingClientRect().height);
  document.documentElement.style.setProperty('--bar', `${h}px`);
}
window.addEventListener('load', syncBarHeightVar);
window.addEventListener('resize', syncBarHeightVar);
/* Ja asinhrona satura (attēlu/ticker) dēļ josla maina augstumu, pārmēra vēlreiz */
['wxI','tk'].forEach(id=>{
  const el = document.getElementById(id);
  if(el){
    ['load','error'].forEach(ev=>el.addEventListener(ev, () => setTimeout(syncBarHeightVar, 50)));
